A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     1


MACRO ASSEMBLER A51 V8.00d
OBJECT MODULE PLACED IN F02x_D3Blinky.OBJ
ASSEMBLER INVOKED BY: C:\SiLabs\MCU\IDEfiles\C51\BIN\a51.exe F02x_D3Blinky.asm XR GEN DB EP NOMOD51

LOC  OBJ            LINE     SOURCE

                       1     $nomod51 
                       2     ;-----------------------------------------------------------------------------
                       3     ;  Copyright (C) 2007 Silicon Laboratories, Inc.
                       4     ;  All rights reserved.
                       5     ;
                       6     ;
                       7     ;
                       8     ;  FILE NAME   :  F02x_BLINKY.ASM 
                       9     ;  TARGET MCU  :  C8051F020 
                      10     ;  DESCRIPTION :  This program illustrates how to disable the watchdog timer,
                      11     ;                 configure the Crossbar, configure a port and write to a port
                      12     ;                 I/O pin.
                      13     ;
                      14     ;       NOTES: 
                      15     ;
                      16     ;-----------------------------------------------------------------------------
                      17     
                      18     ;$include (c8051f020.inc) ; Include register definition file.
                +1    19     ;-----------------------------------------------------------------------------
                +1    20     ;       
                +1    21     ;       
                +1    22     ;
                +1    23     ;
                +1    24     ;       FILE NAME       : C8051F020.INC 
                +1    25     ;       TARGET MCUs     : C8051F020, 'F021, 'F022, 'F023 
                +1    26     ;       DESCRIPTION     : Register/bit definitions for the C8051F02x product family.  
                +1    27     ;
                +1    28     ;       REVISION 1.0    
                +1    29     ;
                +1    30     ;-----------------------------------------------------------------------------
                +1    31     ;REGISTER DEFINITIONS
                +1    32     ;
  0080          +1    33     P0       DATA  080H   ; PORT 0
  0081          +1    34     SP       DATA  081H   ; STACK POINTER
  0082          +1    35     DPL      DATA  082H   ; DATA POINTER - LOW BYTE
  0083          +1    36     DPH      DATA  083H   ; DATA POINTER - HIGH BYTE
  0084          +1    37     P4       DATA  084H   ; PORT 4
  0085          +1    38     P5       DATA  085H   ; PORT 5
  0086          +1    39     P6       DATA  086H   ; PORT 6
  0087          +1    40     PCON     DATA  087H   ; POWER CONTROL
  0088          +1    41     TCON     DATA  088H   ; TIMER CONTROL
  0089          +1    42     TMOD     DATA  089H   ; TIMER MODE
  008A          +1    43     TL0      DATA  08AH   ; TIMER 0 - LOW BYTE
  008B          +1    44     TL1      DATA  08BH   ; TIMER 1 - LOW BYTE
  008C          +1    45     TH0      DATA  08CH   ; TIMER 0 - HIGH BYTE
  008D          +1    46     TH1      DATA  08DH   ; TIMER 1 - HIGH BYTE
  008E          +1    47     CKCON    DATA  08EH   ; CLOCK CONTROL
  008F          +1    48     PSCTL    DATA  08FH   ; PROGRAM STORE R/W CONTROL
  0090          +1    49     P1       DATA  090H   ; PORT 1
  0091          +1    50     TMR3CN   DATA  091H   ; TIMER 3 CONTROL
  0092          +1    51     TMR3RLL  DATA  092H   ; TIMER 3 RELOAD REGISTER - LOW BYTE
  0093          +1    52     TMR3RLH  DATA  093H   ; TIMER 3 RELOAD REGISTER - HIGH BYTE
  0094          +1    53     TMR3L    DATA  094H   ; TIMER 3 - LOW BYTE
  0095          +1    54     TMR3H    DATA  095H   ; TIMER 3 - HIGH BYTE
  0096          +1    55     P7       DATA  096H   ; PORT 7
  0098          +1    56     SCON0    DATA  098H   ; SERIAL PORT 0 CONTROL
  0099          +1    57     SBUF0    DATA  099H   ; SERIAL PORT 0 BUFFER
  009A          +1    58     SPI0CFG  DATA  09AH   ; SERIAL PERIPHERAL INTERFACE 0 CONFIGURATION
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     2

  009B          +1    59     SPI0DAT  DATA  09BH   ; SERIAL PERIPHERAL INTERFACE 0 DATA
  009C          +1    60     ADC1     DATA  09CH   ; ADC 1 DATA
  009D          +1    61     SPI0CKR  DATA  09DH   ; SERIAL PERIPHERAL INTERFACE 0 CLOCK RATE CONTROL
  009E          +1    62     CPT0CN   DATA  09EH   ; COMPARATOR 0 CONTROL
  009F          +1    63     CPT1CN   DATA  09FH   ; COMPARATOR 1 CONTROL 
  00A0          +1    64     P2       DATA  0A0H   ; PORT 2
  00A1          +1    65     EMI0TC   DATA  0A1H   ; EMIF TIMING CONTROL
  00A3          +1    66     EMI0CF   DATA  0A3H   ; EXTERNAL MEMORY INTERFACE (EMIF) CONFIGURATION
  00A4          +1    67     P0MDOUT  DATA  0A4H   ; PORT 0 OUTPUT MODE CONFIGURATION
  00A5          +1    68     P1MDOUT  DATA  0A5H   ; PORT 1 OUTPUT MODE CONFIGURATION
  00A6          +1    69     P2MDOUT  DATA  0A6H   ; PORT 2 OUTPUT MODE CONFIGURATION
  00A7          +1    70     P3MDOUT  DATA  0A7H   ; PORT 3 OUTPUT MODE CONFIGURATION
  00A8          +1    71     IE       DATA  0A8H   ; INTERRUPT ENABLE
  00A9          +1    72     SADDR0   DATA  0A9H   ; SERIAL PORT 0 SLAVE ADDRESS
  00AA          +1    73     ADC1CN  DATA  0AAH   ; ADC 1 CONTROL
  00AB          +1    74     ADC1CF   DATA  0ABH   ; ADC 1 ANALOG MUX CONFIGURATION
  00AC          +1    75     AMX1SL   DATA  0ACH   ; ADC 1 ANALOG MUX CHANNEL SELECT
  00AD          +1    76     P3IF     DATA  0ADH   ; PORT 3 EXTERNAL INTERRUPT FLAGS
  00AE          +1    77     SADEN1   DATA  0AEH   ; SERIAL PORT 1 SLAVE ADDRESS MASK
  00AF          +1    78     EMI0CN   DATA  0AFH   ; EXTERNAL MEMORY INTERFACE CONTROL
  00B0          +1    79     P3       DATA  0B0H   ; PORT 3
  00B1          +1    80     OSCXCN   DATA  0B1H   ; EXTERNAL OSCILLATOR CONTROL
  00B2          +1    81     OSCICN   DATA  0B2H   ; INTERNAL OSCILLATOR CONTROL
  00B5          +1    82     P74OUT   DATA  0B5H   ; PORTS 4 - 7 OUTPUT MODE
  00B6          +1    83     FLSCL    DATA  0B6H   ; FLASH MEMORY TIMING PRESCALER
  00B7          +1    84     FLACL    DATA  0B7H   ; FLASH ACESS LIMIT 
  00B8          +1    85     IP       DATA  0B8H   ; INTERRUPT PRIORITY
  00B9          +1    86     SADEN0   DATA  0B9H   ; SERIAL PORT 0 SLAVE ADDRESS MASK
  00BA          +1    87     AMX0CF   DATA  0BAH   ; ADC 0 MUX CONFIGURATION
  00BB          +1    88     AMX0SL   DATA  0BBH   ; ADC 0 MUX CHANNEL SELECTION
  00BC          +1    89     ADC0CF   DATA  0BCH   ; ADC 0 CONFIGURATION
  00BD          +1    90     P1MDIN   DATA  0BDH   ; PORT 1 INPUT MODE
  00BE          +1    91     ADC0L    DATA  0BEH   ; ADC 0 DATA - LOW BYTE
  00BF          +1    92     ADC0H    DATA  0BFH   ; ADC 0 DATA - HIGH BYTE 
  00C0          +1    93     SMB0CN   DATA  0C0H   ; SMBUS 0 CONTROL
  00C1          +1    94     SMB0STA  DATA  0C1H   ; SMBUS 0 STATUS
  00C2          +1    95     SMB0DAT  DATA  0C2H   ; SMBUS 0 DATA 
  00C3          +1    96     SMB0ADR  DATA  0C3H   ; SMBUS 0 SLAVE ADDRESS
  00C4          +1    97     ADC0GTL  DATA  0C4H   ; ADC 0 GREATER-THAN REGISTER - LOW BYTE
  00C5          +1    98     ADC0GTH  DATA  0C5H   ; ADC 0 GREATER-THAN REGISTER - HIGH BYTE
  00C6          +1    99     ADC0LTL  DATA  0C6H   ; ADC 0 LESS-THAN REGISTER - LOW BYTE
  00C7          +1   100     ADC0LTH  DATA  0C7H   ; ADC 0 LESS-THAN REGISTER - HIGH BYTE
  00C8          +1   101     T2CON    DATA  0C8H   ; TIMER 2 CONTROL
  00C9          +1   102     T4CON    DATA  0C9H   ; TIMER 4 CONTROL
  00CA          +1   103     RCAP2L   DATA  0CAH   ; TIMER 2 CAPTURE REGISTER - LOW BYTE
  00CB          +1   104     RCAP2H   DATA  0CBH   ; TIMER 2 CAPTURE REGISTER - HIGH BYTE
  00CC          +1   105     TL2      DATA  0CCH   ; TIMER 2 - LOW BYTE
  00CD          +1   106     TH2      DATA  0CDH   ; TIMER 2 - HIGH BYTE
  00CF          +1   107     SMB0CR   DATA  0CFH   ; SMBUS 0 CLOCK RATE
  00D0          +1   108     PSW      DATA  0D0H   ; PROGRAM STATUS WORD
  00D1          +1   109     REF0CN   DATA  0D1H   ; VOLTAGE REFERENCE 0 CONTROL
  00D2          +1   110     DAC0L    DATA  0D2H   ; DAC 0 REGISTER - LOW BYTE
  00D3          +1   111     DAC0H    DATA  0D3H   ; DAC 0 REGISTER - HIGH BYTE
  00D4          +1   112     DAC0CN   DATA  0D4H   ; DAC 0 CONTROL
  00D5          +1   113     DAC1L    DATA  0D5H   ; DAC 1 REGISTER - LOW BYTE
  00D6          +1   114     DAC1H    DATA  0D6H   ; DAC 1 REGISTER - HIGH BYTE
  00D7          +1   115     DAC1CN   DATA  0D7H   ; DAC 1 CONTROL
  00D8          +1   116     PCA0CN   DATA  0D8H   ; PCA 0 COUNTER CONTROL
  00D9          +1   117     PCA0MD   DATA  0D9H   ; PCA 0 COUNTER MODE
  00DA          +1   118     PCA0CPM0 DATA  0DAH   ; CONTROL REGISTER FOR PCA 0 MODULE 0
  00DB          +1   119     PCA0CPM1 DATA  0DBH   ; CONTROL REGISTER FOR PCA 0 MODULE 1
  00DC          +1   120     PCA0CPM2 DATA  0DCH   ; CONTROL REGISTER FOR PCA 0 MODULE 2
  00DD          +1   121     PCA0CPM3 DATA  0DDH   ; CONTROL REGISTER FOR PCA 0 MODULE 3
  00DE          +1   122     PCA0CPM4 DATA  0DEH   ; CONTROL REGISTER FOR PCA 0 MODULE 4
  00E0          +1   123     ACC      DATA  0E0H   ; ACCUMULATOR
  00E1          +1   124     XBR0     DATA  0E1H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 0
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     3

  00E2          +1   125     XBR1     DATA  0E2H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 1
  00E3          +1   126     XBR2     DATA  0E3H   ; DIGITAL CROSSBAR CONFIGURATION REGISTER 2
  00E4          +1   127     RCAP4L   DATA  0E4H   ; TIMER 4 CAPTURE REGISTER - LOW BYTE
  00E5          +1   128     RCAP4H   DATA  0E5H   ; TIMER 4 CAPTURE REGISTER - HIGH BYTE
  00E6          +1   129     EIE1     DATA  0E6H   ; EXTERNAL INTERRUPT ENABLE 1
  00E7          +1   130     EIE2     DATA  0E7H   ; EXTERNAL INTERRUPT ENABLE 2
  00E8          +1   131     ADC0CN   DATA  0E8H   ; ADC 0 CONTROL
  00E9          +1   132     PCA0L    DATA  0E9H   ; PCA 0 TIMER - LOW BYTE
  00EA          +1   133     PCA0CPL0 DATA  0EAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - LOW BYTE
  00EB          +1   134     PCA0CPL1 DATA  0EBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - LOW BYTE
  00EC          +1   135     PCA0CPL2 DATA  0ECH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - LOW BYTE
  00ED          +1   136     PCA0CPL3 DATA  0EDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - LOW BYTE
  00EE          +1   137     PCA0CPL4 DATA  0EEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - LOW BYTE
  00EF          +1   138     RSTSRC   DATA  0EFH   ; RESET SOURCE 
  00F0          +1   139     B        DATA  0F0H   ; B REGISTER
  00F1          +1   140     SCON1    DATA  0F1H   ; SERIAL PORT 1 CONTROL
  00F2          +1   141     SBUF1    DATA  0F2H   ; SERAIL PORT 1 DATA
  00F3          +1   142     SADDR1   DATA  0F3H   ; SERAIL PORT 1 
  00F4          +1   143     TL4      DATA  0F4H   ; TIMER 4 DATA - LOW BYTE
  00F5          +1   144     TH4      DATA  0F5H   ; TIMER 4 DATA - HIGH BYTE
  00F6          +1   145     EIP1     DATA  0F6H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 1
  00F7          +1   146     EIP2     DATA  0F7H   ; EXTERNAL INTERRUPT PRIORITY REGISTER 2
  00F8          +1   147     SPI0CN   DATA  0F8H   ; SERIAL PERIPHERAL INTERFACE 0 CONTROL 
  00F9          +1   148     PCA0H    DATA  0F9H   ; PCA 0 TIMER - HIGH BYTE
  00FA          +1   149     PCA0CPH0 DATA  0FAH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 0 - HIGH BYTE
  00FB          +1   150     PCA0CPH1 DATA  0FBH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 1 - HIGH BYTE
  00FC          +1   151     PCA0CPH2 DATA  0FCH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 2 - HIGH BYTE
  00FD          +1   152     PCA0CPH3 DATA  0FDH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 3 - HIGH BYTE
  00FE          +1   153     PCA0CPH4 DATA  0FEH   ; CAPTURE/COMPARE REGISTER FOR PCA 0 MODULE 4 - HIGH BYTE
  00FF          +1   154     WDTCN    DATA  0FFH   ; WATCHDOG TIMER CONTROL 
                +1   155     ;
                +1   156     ;------------------------------------------------------------------------------
                +1   157     ;BIT DEFINITIONS
                +1   158     ;
                +1   159     ; TCON 88H
  0088          +1   160     IT0      BIT   TCON.0 ; EXT. INTERRUPT 0 TYPE
  0089          +1   161     IE0      BIT   TCON.1 ; EXT. INTERRUPT 0 EDGE FLAG
  008A          +1   162     IT1      BIT   TCON.2 ; EXT. INTERRUPT 1 TYPE
  008B          +1   163     IE1      BIT   TCON.3 ; EXT. INTERRUPT 1 EDGE FLAG
  008C          +1   164     TR0      BIT   TCON.4 ; TIMER 0 ON/OFF CONTROL
  008D          +1   165     TF0      BIT   TCON.5 ; TIMER 0 OVERFLOW FLAG
  008E          +1   166     TR1      BIT   TCON.6 ; TIMER 1 ON/OFF CONTROL
  008F          +1   167     TF1      BIT   TCON.7 ; TIMER 1 OVERFLOW FLAG
                +1   168     ;
                +1   169     ; SCON0 98H
  0098          +1   170     RI       BIT   SCON0.0 ; RECEIVE INTERRUPT FLAG
  0099          +1   171     TI       BIT   SCON0.1 ; TRANSMIT INTERRUPT FLAG
  009A          +1   172     RB8      BIT   SCON0.2 ; RECEIVE BIT 8
  009B          +1   173     TB8      BIT   SCON0.3 ; TRANSMIT BIT 8
  009C          +1   174     REN      BIT   SCON0.4 ; RECEIVE ENABLE
  009D          +1   175     SM2      BIT   SCON0.5 ; MULTIPROCESSOR COMMUNICATION ENABLE
  009E          +1   176     SM1      BIT   SCON0.6 ; SERIAL MODE CONTROL BIT 1
  009F          +1   177     SM0      BIT   SCON0.7 ; SERIAL MODE CONTROL BIT 0
                +1   178     ; 
                +1   179     ; IE A8H
  00A8          +1   180     EX0      BIT   IE.0   ; EXTERNAL INTERRUPT 0 ENABLE
  00A9          +1   181     ET0      BIT   IE.1   ; TIMER 0 INTERRUPT ENABLE
  00AA          +1   182     EX1      BIT   IE.2   ; EXTERNAL INTERRUPT 1 ENABLE
  00AB          +1   183     ET1      BIT   IE.3   ; TIMER 1 INTERRUPT ENABLE
  00AC          +1   184     ES       BIT   IE.4   ; SERIAL PORT INTERRUPT ENABLE
  00AD          +1   185     ET2      BIT   IE.5   ; TIMER 2 INTERRUPT ENABLE
  00AF          +1   186     EA       BIT   IE.7   ; GLOBAL INTERRUPT ENABLE
                +1   187     ;
                +1   188     ; IP B8H
  00B8          +1   189     PX0      BIT   IP.0   ; EXTERNAL INTERRUPT 0 PRIORITY
  00B9          +1   190     PT0      BIT   IP.1   ; TIMER 0 PRIORITY
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     4

  00BA          +1   191     PX1      BIT   IP.2   ; EXTERNAL INTERRUPT 1 PRIORITY
  00BB          +1   192     PT1      BIT   IP.3   ; TIMER 1 PRIORITY
  00BC          +1   193     PS       BIT   IP.4   ; SERIAL PORT PRIORITY
  00BD          +1   194     PT2      BIT   IP.5   ; TIMER 2 PRIORITY
                +1   195     ;
                +1   196     ; SMB0CN C0H
  00C0          +1   197     SMBTOE   BIT   SMB0CN.0 ; SMBUS 0 TIMEOUT ENABLE
  00C1          +1   198     SMBFTE   BIT   SMB0CN.1 ; SMBUS 0 FREE TIMER ENABLE
  00C2          +1   199     AA       BIT   SMB0CN.2 ; SMBUS 0 ASSERT/ACKNOWLEDGE FLAG
  00C3          +1   200     SI       BIT   SMB0CN.3 ; SMBUS 0 INTERRUPT PENDING FLAG
  00C4          +1   201     STO      BIT   SMB0CN.4 ; SMBUS 0 STOP FLAG
  00C5          +1   202     STA      BIT   SMB0CN.5 ; SMBUS 0 START FLAG
  00C6          +1   203     ENSMB    BIT   SMB0CN.6 ; SMBUS 0 ENABLE 
                +1   204     ;
                +1   205     ; T2CON C8H
  00C8          +1   206     CPRL2    BIT   T2CON.0 ; CAPTURE OR RELOAD SELECT
  00C9          +1   207     CT2      BIT   T2CON.1 ; TIMER OR COUNTER SELECT
  00CA          +1   208     TR2      BIT   T2CON.2 ; TIMER 2 ON/OFF CONTROL
  00CB          +1   209     EXEN2    BIT   T2CON.3 ; TIMER 2 EXTERNAL ENABLE FLAG
  00CC          +1   210     TCLK     BIT   T2CON.4 ; TRANSMIT CLOCK FLAG
  00CD          +1   211     RCLK     BIT   T2CON.5 ; RECEIVE CLOCK FLAG
  00CE          +1   212     EXF2     BIT   T2CON.6 ; EXTERNAL FLAG
  00CF          +1   213     TF2      BIT   T2CON.7 ; TIMER 2 OVERFLOW FLAG
                +1   214     ;
                +1   215     ; PSW D0H
  00D0          +1   216     P        BIT   PSW.0  ; ACCUMULATOR PARITY FLAG
  00D1          +1   217     F1       BIT   PSW.1  ; USER FLAG 1
  00D2          +1   218     OV       BIT   PSW.2  ; OVERFLOW FLAG
  00D3          +1   219     RS0      BIT   PSW.3  ; REGISTER BANK SELECT 0
  00D4          +1   220     RS1      BIT   PSW.4  ; REGISTER BANK SELECT 1
  00D5          +1   221     F0       BIT   PSW.5  ; USER FLAG 0
  00D6          +1   222     AC       BIT   PSW.6  ; AUXILIARY CARRY FLAG
  00D7          +1   223     CY       BIT   PSW.7  ; CARRY FLAG
                +1   224     ;
                +1   225     ; PCA0CN D8H
  00D8          +1   226     CCF0     BIT   PCA0CN.0 ; PCA 0 MODULE 0 INTERRUPT FLAG
  00D9          +1   227     CCF1     BIT   PCA0CN.1 ; PCA 0 MODULE 1 INTERRUPT FLAG
  00DA          +1   228     CCF2     BIT   PCA0CN.2 ; PCA 0 MODULE 2 INTERRUPT FLAG
  00DB          +1   229     CCF3     BIT   PCA0CN.3 ; PCA 0 MODULE 3 INTERRUPT FLAG
  00DC          +1   230     CCF4     BIT   PCA0CN.4 ; PCA 0 MODULE 4 INTERRUPT FLAG
  00DE          +1   231     CR       BIT   PCA0CN.6 ; PCA 0 COUNTER RUN CONTROL BIT
  00DF          +1   232     CF       BIT   PCA0CN.7 ; PCA 0 COUNTER OVERFLOW FLAG
                +1   233     ;
                +1   234     ; ADC0CN E8H
  00E8          +1   235     AD0LJST  BIT   ADC0CN.0 ; ADC 0 RIGHT JUSTIFY DATA BIT
  00E9          +1   236     AD0WINT  BIT   ADC0CN.1 ; ADC 0 WINDOW COMPARE INTERRUPT FLAG
  00EA          +1   237     AD0STM0  BIT   ADC0CN.2 ; ADC 0 START OF CONVERSION MODE BIT 0
  00EB          +1   238     AD0STM1  BIT   ADC0CN.3 ; ADC 0 START OF CONVERSION MODE BIT 1
  00EC          +1   239     AD0BUSY  BIT   ADC0CN.4 ; ADC 0 BUSY FLAG
  00ED          +1   240     AD0INT   BIT   ADC0CN.5 ; ADC 0 CONVERISION COMPLETE INTERRUPT FLAG 
  00EE          +1   241     AD0TM    BIT   ADC0CN.6 ; ADC 0 TRACK MODE
  00EF          +1   242     AD0EN    BIT   ADC0CN.7 ; ADC 0 ENABLE
                +1   243     ;
                +1   244     ; SPI0CN F8H
  00F8          +1   245     SPIEN    BIT   SPI0CN.0 ; SPI 0 SPI ENABLE
  00F9          +1   246     MSTEN    BIT   SPI0CN.1 ; SPI 0 MASTER ENABLE
  00FA          +1   247     SLVSEL   BIT   SPI0CN.2 ; SPI 0 SLAVE SELECT
  00FB          +1   248     TXBSY    BIT   SPI0CN.3 ; SPI 0 TX BUSY FLAG
  00FC          +1   249     RXOVRN   BIT   SPI0CN.4 ; SPI 0 RX OVERRUN FLAG
  00FD          +1   250     MODF     BIT   SPI0CN.5 ; SPI 0 MODE FAULT FLAG
  00FE          +1   251     WCOL     BIT   SPI0CN.6 ; SPI 0 WRITE COLLISION FLAG
  00FF          +1   252     SPIF     BIT   SPI0CN.7 ; SPI 0 INTERRUPT FLAG
                     253     
                     254     ;-----------------------------------------------------------------------------
                     255     ; EQUATES
                     256     ;-----------------------------------------------------------------------------
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     5

                     257     
  0090               258     ALRMAC_LED      bit   P1.0             ; Port pin connected to GAL FLASH LED.
  0091               259     ALRMAR_LED                      bit             P1.1                                       
                                   ; Port pin connected to GAL ARMED LED.
  0092               260     TAMPER_LED                      bit             P1.2                                       
                                   ; Port pin connected to GAL TAMPER LED.
  0093               261     CAPLOCK_LED                     bit             P1.3                                       
                                   ; Port pin connected to GAL CAPLOCK LED.
  0094               262     REDMODE_LED                     bit             P1.4                                       
                                   ; Port pin connected to GAL REDMODE LED.
  0095               263     GREENMODE_LED           bit             P1.5                                             ; 
                             Port pin connected to GAL GREENMODE LED.
  0096               264     PURPLEMODE_LED  bit             P1.6                                             ; Port pin
                              connected to GAL PURPLEMODE LED.
  0097               265     BLUEMODE_LED            bit             P1.7                                             ; 
                             Port pin connected to GAL BLUEMODE LED.
                     266     
                     267     ;-----------------------------------------------------------------------------
                     268     ; RESET and INTERRUPT VECTORS
                     269     ;-----------------------------------------------------------------------------
                     270     
                     271                    ; Reset Vector
----                 272                    cseg AT 0
0000 020000   F      273                    ljmp Main               ; Locate a jump to the start of code at 
                     274                                            ; the reset vector.
                     275     
                     276     ;-----------------------------------------------------------------------------
                     277     ; MAIN CODE SEGMENT
                     278     ;-----------------------------------------------------------------------------
                     279     
                     280     
                     281     Blink          segment  CODE
                     282     
----                 283                    rseg     Blink          ; Switch to this code segment.
                     284                    using    0              ; Specify register bank for the following
                     285                                            ; program code.
                     286     
0000                 287     Main:          
                     288                             
                     289     
0000                 290                             Init_Device:
0000 120000   F      291                                             lcall Chip_Init
                     292                                             
                     293     
                     294     
                     295                                                              
                     296                    ; Initialize all LED's to OFF
0003 C290            297                    clr   ALRMAC_LED
0005 C291            298                                                              clr   ALRMAR_LED
0007 C292            299                                                              clr   TAMPER_LED
0009 C293            300                                                              clr   CAPLOCK_LED
000B C294            301                                                              clr   REDMODE_LED
000D C295            302                                                              clr   GREENMODE_LED
000F C296            303                                                              clr   PURPLEMODE_LED
0011 C297            304                                                              clr   BLUEMODE_LED
                     305     
0013 75E00F          306                                                              mov     ACC, #0Fh                 
                                          ;Provide count to exit LED loop
                     307                    
0016 7F03            308     Loop2:         mov   R7, #03h                           ; Simple delay loop.
0018 7E00            309     Loop1:         mov   R6, #00h
001A 7D00            310     Loop0:         mov   R5, #00h
                     311                                                              
                     312                                                              
001C DDFE            313                                                              djnz  R5, $
001E DEFA            314                    djnz  R6, Loop0
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     6

0020 15E0            315                    dec       ACC                    ;Exit blink LED loop after 16 blinks 
0022 6014            316                    jz                Finish
0024 DFF2            317                                                              djnz  R7, Loop1
0026 D290            318                                                              setb    ALRMAC_LED                
                                  ; Turn on GAL Flashing Ckt
0028 B291            319                    cpl   ALRMAR_LED                 ; Toggle LED's.
002A B292            320                                                              cpl   TAMPER_LED                  
                                  ; Toggle LED's.
002C B293            321                                                              cpl   CAPLOCK_LED              ; T
                             oggle LED's.
002E B294            322                                                              cpl   REDMODE_LED              ; T
                             oggle LED's.
0030 B295            323                                                              cpl   GREENMODE_LED    ; Toggle LE
                             D's.
0032 B296            324                                                              cpl   PURPLEMODE_LED   ; Toggle LE
                             D's.
0034 B297            325                                                              cpl   BLUEMODE_LED             ; T
                             oggle LED's.                                              
0036 80DE            326                    jmp   Loop2
                     327     
0038                 328     Finish:
0038 C290            329                                                              clr ALRMAC_LED                    
                                  ;Turn off GAL Flashing Ckt
003A 80FE            330                                                              sjmp $                            
                                                          ; Lock up program
                     331     
                     332     ;-------------------------------------------------------------------
                     333     ;             Chip Initialization Sub Routine
                     334     ;-------------------------------------------------------------------
003C                 335     Chip_Init:
003C 75B167          336                                             mov  OSCXCN,    #067h                           ; E
                             nables the Crystal Oscillator 
003F 781E            337                                             mov  R0,        #030        ; Wait 1ms for initiali
                             zation
0041                 338                             Osc_Wait1:
0041 E4              339                                             clr  A
0042 D5E0FD          340                                             djnz ACC,       $
0045 D8FA            341                                             djnz R0,        Osc_Wait1
0047                 342                             Osc_Wait2:
0047 E5B1            343                                             mov  A, OSCXCN
0049 30E7FB          344                                             jnb  ACC.7,     Osc_Wait2
004C 75B208          345                                             mov  OSCICN,    #08h
                     346                             
                     347                                                              
004F                 348     Wdt_Setup:                                               
                     349                                                              ; Disable the WDT. (IRQs not enabl
                             ed at this point.)
                     350                    ; If interrupts were enabled, we would need to explicitly disable
                     351                    ; them so that the 2nd move to WDTCN occurs no more than four clock 
                     352                    ; cycles after the first move to WDTCN.
                     353     
004F 75FFDE          354                    mov   WDTCN, #0DEh
0052 75FFAD          355                    mov   WDTCN, #0ADh
                     356                                             
0055                 357     Crossbar_Setup:               
0055 75E340          358                    mov   XBR2, #40h ; Enable the Port I/O Crossbar
0058 75E280          359                                                              mov     XBR1, #80h ; Places system
                              clock on P0.0
005B 22              360                                                              ret
                     361     
                     362     ;-----------------------------------------------------------------------------
                     363     ; End of file.
                     364     
                     365     END
                             
                             
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     7

                             
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     8

XREF SYMBOL TABLE LISTING
---- ------ ----- -------


N A M E             T Y P E  V A L U E   ATTRIBUTES / REFERENCES

AA . . . . . . . .  B ADDR   00C0H.2 A      199#
AC . . . . . . . .  B ADDR   00D0H.6 A      222#
ACC. . . . . . . .  D ADDR   00E0H   A      123# 306 315 340 344
AD0BUSY. . . . . .  B ADDR   00E8H.4 A      239#
AD0EN. . . . . . .  B ADDR   00E8H.7 A      242#
AD0INT . . . . . .  B ADDR   00E8H.5 A      240#
AD0LJST. . . . . .  B ADDR   00E8H.0 A      235#
AD0STM0. . . . . .  B ADDR   00E8H.2 A      237#
AD0STM1. . . . . .  B ADDR   00E8H.3 A      238#
AD0TM. . . . . . .  B ADDR   00E8H.6 A      241#
AD0WINT. . . . . .  B ADDR   00E8H.1 A      236#
ADC0CF . . . . . .  D ADDR   00BCH   A      89#
ADC0CN . . . . . .  D ADDR   00E8H   A      131# 235 236 237 238 239 240 241 242
ADC0GTH. . . . . .  D ADDR   00C5H   A      98#
ADC0GTL. . . . . .  D ADDR   00C4H   A      97#
ADC0H. . . . . . .  D ADDR   00BFH   A      92#
ADC0L. . . . . . .  D ADDR   00BEH   A      91#
ADC0LTH. . . . . .  D ADDR   00C7H   A      100#
ADC0LTL. . . . . .  D ADDR   00C6H   A      99#
ADC1 . . . . . . .  D ADDR   009CH   A      60#
ADC1CF . . . . . .  D ADDR   00ABH   A      74#
ADC1CN . . . . . .  D ADDR   00AAH   A      73#
ALRMAC_LED . . . .  B ADDR   0090H.0 A      258# 297 318 329
ALRMAR_LED . . . .  B ADDR   0090H.1 A      259# 298 319
AMX0CF . . . . . .  D ADDR   00BAH   A      87#
AMX0SL . . . . . .  D ADDR   00BBH   A      88#
AMX1SL . . . . . .  D ADDR   00ACH   A      75#
B. . . . . . . . .  D ADDR   00F0H   A      139#
BLINK. . . . . . .  C SEG    005CH       REL=UNIT   281# 283
BLUEMODE_LED . . .  B ADDR   0090H.7 A      265# 304 325
CAPLOCK_LED. . . .  B ADDR   0090H.3 A      261# 300 321
CCF0 . . . . . . .  B ADDR   00D8H.0 A      226#
CCF1 . . . . . . .  B ADDR   00D8H.1 A      227#
CCF2 . . . . . . .  B ADDR   00D8H.2 A      228#
CCF3 . . . . . . .  B ADDR   00D8H.3 A      229#
CCF4 . . . . . . .  B ADDR   00D8H.4 A      230#
CF . . . . . . . .  B ADDR   00D8H.7 A      232#
CHIP_INIT. . . . .  C ADDR   003CH   R   SEG=BLINK   291 335#
CKCON. . . . . . .  D ADDR   008EH   A      47#
CPRL2. . . . . . .  B ADDR   00C8H.0 A      206#
CPT0CN . . . . . .  D ADDR   009EH   A      62#
CPT1CN . . . . . .  D ADDR   009FH   A      63#
CR . . . . . . . .  B ADDR   00D8H.6 A      231#
CROSSBAR_SETUP . .  C ADDR   0055H   R   SEG=BLINK   357#
CT2. . . . . . . .  B ADDR   00C8H.1 A      207#
CY . . . . . . . .  B ADDR   00D0H.7 A      223#
DAC0CN . . . . . .  D ADDR   00D4H   A      112#
DAC0H. . . . . . .  D ADDR   00D3H   A      111#
DAC0L. . . . . . .  D ADDR   00D2H   A      110#
DAC1CN . . . . . .  D ADDR   00D7H   A      115#
DAC1H. . . . . . .  D ADDR   00D6H   A      114#
DAC1L. . . . . . .  D ADDR   00D5H   A      113#
DPH. . . . . . . .  D ADDR   0083H   A      36#
DPL. . . . . . . .  D ADDR   0082H   A      35#
EA . . . . . . . .  B ADDR   00A8H.7 A      186#
EIE1 . . . . . . .  D ADDR   00E6H   A      129#
EIE2 . . . . . . .  D ADDR   00E7H   A      130#
EIP1 . . . . . . .  D ADDR   00F6H   A      145#
EIP2 . . . . . . .  D ADDR   00F7H   A      146#
EMI0CF . . . . . .  D ADDR   00A3H   A      66#
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE     9

EMI0CN . . . . . .  D ADDR   00AFH   A      78#
EMI0TC . . . . . .  D ADDR   00A1H   A      65#
ENSMB. . . . . . .  B ADDR   00C0H.6 A      203#
ES . . . . . . . .  B ADDR   00A8H.4 A      184#
ET0. . . . . . . .  B ADDR   00A8H.1 A      181#
ET1. . . . . . . .  B ADDR   00A8H.3 A      183#
ET2. . . . . . . .  B ADDR   00A8H.5 A      185#
EX0. . . . . . . .  B ADDR   00A8H.0 A      180#
EX1. . . . . . . .  B ADDR   00A8H.2 A      182#
EXEN2. . . . . . .  B ADDR   00C8H.3 A      209#
EXF2 . . . . . . .  B ADDR   00C8H.6 A      212#
F0 . . . . . . . .  B ADDR   00D0H.5 A      221#
F1 . . . . . . . .  B ADDR   00D0H.1 A      217#
FINISH . . . . . .  C ADDR   0038H   R   SEG=BLINK   316 328#
FLACL. . . . . . .  D ADDR   00B7H   A      84#
FLSCL. . . . . . .  D ADDR   00B6H   A      83#
GREENMODE_LED. . .  B ADDR   0090H.5 A      263# 302 323
IE . . . . . . . .  D ADDR   00A8H   A      71# 180 181 182 183 184 185 186
IE0. . . . . . . .  B ADDR   0088H.1 A      161#
IE1. . . . . . . .  B ADDR   0088H.3 A      163#
INIT_DEVICE. . . .  C ADDR   0000H   R   SEG=BLINK   290#
IP . . . . . . . .  D ADDR   00B8H   A      85# 189 190 191 192 193 194
IT0. . . . . . . .  B ADDR   0088H.0 A      160#
IT1. . . . . . . .  B ADDR   0088H.2 A      162#
LOOP0. . . . . . .  C ADDR   001AH   R   SEG=BLINK   310# 314
LOOP1. . . . . . .  C ADDR   0018H   R   SEG=BLINK   309# 317
LOOP2. . . . . . .  C ADDR   0016H   R   SEG=BLINK   308# 326
MAIN . . . . . . .  C ADDR   0000H   R   SEG=BLINK   273 287#
MODF . . . . . . .  B ADDR   00F8H.5 A      250#
MSTEN. . . . . . .  B ADDR   00F8H.1 A      246#
OSCICN . . . . . .  D ADDR   00B2H   A      81# 345
OSCXCN . . . . . .  D ADDR   00B1H   A      80# 336 343
OSC_WAIT1. . . . .  C ADDR   0041H   R   SEG=BLINK   338# 341
OSC_WAIT2. . . . .  C ADDR   0047H   R   SEG=BLINK   342# 344
OV . . . . . . . .  B ADDR   00D0H.2 A      218#
P. . . . . . . . .  B ADDR   00D0H.0 A      216#
P0 . . . . . . . .  D ADDR   0080H   A      33#
P0MDOUT. . . . . .  D ADDR   00A4H   A      67#
P1 . . . . . . . .  D ADDR   0090H   A      49# 258 259 260 261 262 263 264 265
P1MDIN . . . . . .  D ADDR   00BDH   A      90#
P1MDOUT. . . . . .  D ADDR   00A5H   A      68#
P2 . . . . . . . .  D ADDR   00A0H   A      64#
P2MDOUT. . . . . .  D ADDR   00A6H   A      69#
P3 . . . . . . . .  D ADDR   00B0H   A      79#
P3IF . . . . . . .  D ADDR   00ADH   A      76#
P3MDOUT. . . . . .  D ADDR   00A7H   A      70#
P4 . . . . . . . .  D ADDR   0084H   A      37#
P5 . . . . . . . .  D ADDR   0085H   A      38#
P6 . . . . . . . .  D ADDR   0086H   A      39#
P7 . . . . . . . .  D ADDR   0096H   A      55#
P74OUT . . . . . .  D ADDR   00B5H   A      82#
PCA0CN . . . . . .  D ADDR   00D8H   A      116# 226 227 228 229 230 231 232
PCA0CPH0 . . . . .  D ADDR   00FAH   A      149#
PCA0CPH1 . . . . .  D ADDR   00FBH   A      150#
PCA0CPH2 . . . . .  D ADDR   00FCH   A      151#
PCA0CPH3 . . . . .  D ADDR   00FDH   A      152#
PCA0CPH4 . . . . .  D ADDR   00FEH   A      153#
PCA0CPL0 . . . . .  D ADDR   00EAH   A      133#
PCA0CPL1 . . . . .  D ADDR   00EBH   A      134#
PCA0CPL2 . . . . .  D ADDR   00ECH   A      135#
PCA0CPL3 . . . . .  D ADDR   00EDH   A      136#
PCA0CPL4 . . . . .  D ADDR   00EEH   A      137#
PCA0CPM0 . . . . .  D ADDR   00DAH   A      118#
PCA0CPM1 . . . . .  D ADDR   00DBH   A      119#
PCA0CPM2 . . . . .  D ADDR   00DCH   A      120#
PCA0CPM3 . . . . .  D ADDR   00DDH   A      121#
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE    10

PCA0CPM4 . . . . .  D ADDR   00DEH   A      122#
PCA0H. . . . . . .  D ADDR   00F9H   A      148#
PCA0L. . . . . . .  D ADDR   00E9H   A      132#
PCA0MD . . . . . .  D ADDR   00D9H   A      117#
PCON . . . . . . .  D ADDR   0087H   A      40#
PS . . . . . . . .  B ADDR   00B8H.4 A      193#
PSCTL. . . . . . .  D ADDR   008FH   A      48#
PSW. . . . . . . .  D ADDR   00D0H   A      108# 216 217 218 219 220 221 222 223
PT0. . . . . . . .  B ADDR   00B8H.1 A      190#
PT1. . . . . . . .  B ADDR   00B8H.3 A      192#
PT2. . . . . . . .  B ADDR   00B8H.5 A      194#
PURPLEMODE_LED . .  B ADDR   0090H.6 A      264# 303 324
PX0. . . . . . . .  B ADDR   00B8H.0 A      189#
PX1. . . . . . . .  B ADDR   00B8H.2 A      191#
RB8. . . . . . . .  B ADDR   0098H.2 A      172#
RCAP2H . . . . . .  D ADDR   00CBH   A      104#
RCAP2L . . . . . .  D ADDR   00CAH   A      103#
RCAP4H . . . . . .  D ADDR   00E5H   A      128#
RCAP4L . . . . . .  D ADDR   00E4H   A      127#
RCLK . . . . . . .  B ADDR   00C8H.5 A      211#
REDMODE_LED. . . .  B ADDR   0090H.4 A      262# 301 322
REF0CN . . . . . .  D ADDR   00D1H   A      109#
REN. . . . . . . .  B ADDR   0098H.4 A      174#
RI . . . . . . . .  B ADDR   0098H.0 A      170#
RS0. . . . . . . .  B ADDR   00D0H.3 A      219#
RS1. . . . . . . .  B ADDR   00D0H.4 A      220#
RSTSRC . . . . . .  D ADDR   00EFH   A      138#
RXOVRN . . . . . .  B ADDR   00F8H.4 A      249#
SADDR0 . . . . . .  D ADDR   00A9H   A      72#
SADDR1 . . . . . .  D ADDR   00F3H   A      142#
SADEN0 . . . . . .  D ADDR   00B9H   A      86#
SADEN1 . . . . . .  D ADDR   00AEH   A      77#
SBUF0. . . . . . .  D ADDR   0099H   A      57#
SBUF1. . . . . . .  D ADDR   00F2H   A      141#
SCON0. . . . . . .  D ADDR   0098H   A      56# 170 171 172 173 174 175 176 177
SCON1. . . . . . .  D ADDR   00F1H   A      140#
SI . . . . . . . .  B ADDR   00C0H.3 A      200#
SLVSEL . . . . . .  B ADDR   00F8H.2 A      247#
SM0. . . . . . . .  B ADDR   0098H.7 A      177#
SM1. . . . . . . .  B ADDR   0098H.6 A      176#
SM2. . . . . . . .  B ADDR   0098H.5 A      175#
SMB0ADR. . . . . .  D ADDR   00C3H   A      96#
SMB0CN . . . . . .  D ADDR   00C0H   A      93# 197 198 199 200 201 202 203
SMB0CR . . . . . .  D ADDR   00CFH   A      107#
SMB0DAT. . . . . .  D ADDR   00C2H   A      95#
SMB0STA. . . . . .  D ADDR   00C1H   A      94#
SMBFTE . . . . . .  B ADDR   00C0H.1 A      198#
SMBTOE . . . . . .  B ADDR   00C0H.0 A      197#
SP . . . . . . . .  D ADDR   0081H   A      34#
SPI0CFG. . . . . .  D ADDR   009AH   A      58#
SPI0CKR. . . . . .  D ADDR   009DH   A      61#
SPI0CN . . . . . .  D ADDR   00F8H   A      147# 245 246 247 248 249 250 251 252
SPI0DAT. . . . . .  D ADDR   009BH   A      59#
SPIEN. . . . . . .  B ADDR   00F8H.0 A      245#
SPIF . . . . . . .  B ADDR   00F8H.7 A      252#
STA. . . . . . . .  B ADDR   00C0H.5 A      202#
STO. . . . . . . .  B ADDR   00C0H.4 A      201#
T2CON. . . . . . .  D ADDR   00C8H   A      101# 206 207 208 209 210 211 212 213
T4CON. . . . . . .  D ADDR   00C9H   A      102#
TAMPER_LED . . . .  B ADDR   0090H.2 A      260# 299 320
TB8. . . . . . . .  B ADDR   0098H.3 A      173#
TCLK . . . . . . .  B ADDR   00C8H.4 A      210#
TCON . . . . . . .  D ADDR   0088H   A      41# 160 161 162 163 164 165 166 167
TF0. . . . . . . .  B ADDR   0088H.5 A      165#
TF1. . . . . . . .  B ADDR   0088H.7 A      167#
TF2. . . . . . . .  B ADDR   00C8H.7 A      213#
A51 MACRO ASSEMBLER  F02X_D3BLINKY                                                        06/15/2008 23:17:38 PAGE    11

TH0. . . . . . . .  D ADDR   008CH   A      45#
TH1. . . . . . . .  D ADDR   008DH   A      46#
TH2. . . . . . . .  D ADDR   00CDH   A      106#
TH4. . . . . . . .  D ADDR   00F5H   A      144#
TI . . . . . . . .  B ADDR   0098H.1 A      171#
TL0. . . . . . . .  D ADDR   008AH   A      43#
TL1. . . . . . . .  D ADDR   008BH   A      44#
TL2. . . . . . . .  D ADDR   00CCH   A      105#
TL4. . . . . . . .  D ADDR   00F4H   A      143#
TMOD . . . . . . .  D ADDR   0089H   A      42#
TMR3CN . . . . . .  D ADDR   0091H   A      50#
TMR3H. . . . . . .  D ADDR   0095H   A      54#
TMR3L. . . . . . .  D ADDR   0094H   A      53#
TMR3RLH. . . . . .  D ADDR   0093H   A      52#
TMR3RLL. . . . . .  D ADDR   0092H   A      51#
TR0. . . . . . . .  B ADDR   0088H.4 A      164#
TR1. . . . . . . .  B ADDR   0088H.6 A      166#
TR2. . . . . . . .  B ADDR   00C8H.2 A      208#
TXBSY. . . . . . .  B ADDR   00F8H.3 A      248#
WCOL . . . . . . .  B ADDR   00F8H.6 A      251#
WDTCN. . . . . . .  D ADDR   00FFH   A      154# 354 355
WDT_SETUP. . . . .  C ADDR   004FH   R   SEG=BLINK   348#
XBR0 . . . . . . .  D ADDR   00E1H   A      124#
XBR1 . . . . . . .  D ADDR   00E2H   A      125# 359
XBR2 . . . . . . .  D ADDR   00E3H   A      126# 358


REGISTER BANK(S) USED: 0 


ASSEMBLY COMPLETE.  0 WARNING(S), 0 ERROR(S)
